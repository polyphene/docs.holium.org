"use strict";(self.webpackChunkholium_docs=self.webpackChunkholium_docs||[]).push([[960],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=a,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5027:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=["components"],l={sidebar_label:"CLI",sidebar_position:2},s="Command-line interface",c={unversionedId:"reference/cli",id:"reference/cli",isDocsHomePage:!1,title:"Command-line interface",description:"Introduction",source:"@site/docs/reference/cli.md",sourceDirName:"reference",slug:"/reference/cli",permalink:"/docs.holium.org/reference/cli",editUrl:"https://github.com/polyphene/holium-docs/blob/main/docs/reference/cli.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"CLI",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Design",permalink:"/docs.holium.org/reference/design"},next:{title:"Rationale",permalink:"/docs.holium.org/reference/sdk/rationale"}},p=[{value:"Introduction",id:"introduction",children:[]},{value:"Project structure",id:"project-structure",children:[]},{value:"Pipeline construction",id:"pipeline-construction",children:[]},{value:"Portations",id:"portations",children:[]},{value:"Pipeline running",id:"pipeline-running",children:[]},{value:"Versioning and collaboration",id:"versioning-and-collaboration",children:[]}],d={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"command-line-interface"},"Command-line interface"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The CLI holds the reference implementation of the Holium protocol. It allows creating transformation pipelines locally,\nrunning them locally and exporting them for collaboration on a remote repository."),(0,r.kt)("p",null,"It all revolves around a few concepts."),(0,r.kt)("p",null,"With the CLI, transformation pipelines are directed acyclic graphs (DAGs) of nodes that transform data.\nEach node is an isolated function which solely focuses on transforming data, either by reorganizing it or\nrunning functions on them. In the latter case, these functions are executed in an isolated sandbox, do not react to\nany external event except to the data they are provided with as input parameters."),(0,r.kt)("p",null,"When running a pipeline on actual data, the node are sorted and successively executed. An execution can simply succeed\nor fail. In the former case, by the end of the execution each node of the pipeline holds the result of their own\ntransformation.\nFrom a logical standpoint, data is transformed at each node of the pipeline, and each node holds the data at their\nrespective stage."),(0,r.kt)("p",null,"This data is serialized as HoliumCBOR values, thus freed from any semantic lock. Edges of the DAG are connections in\ncharge of selecting and reordering parts of data to hand over to the next node. Simple linear DAGs are thus handled with\n1-to-1 connections, but data at a node can just as well be used multiple times (the node has multiple children nodes) and\nmultiple nodes may also ",(0,r.kt)("em",{parentName:"p"},"collaborate")," to form the input parameter of another node (multiple nodes share the same child node)."),(0,r.kt)("p",null,"In the context of the CLI, we may define three types of nodes to ease local construction of pipelines:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Sources")," acting as head nodes of the pipeline, hold source data."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Shapers"),", once connected to other nodes, perform simple manipulations of datasets, like merging, sorting,\u2026."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Transformations")," also re-shape data but most importantly also run WebAssembly transformations on them.")),(0,r.kt)("p",null,"While these nodes only manipulate data within the Holium protocol, serialized with HoliumCBOR, bridges called ",(0,r.kt)("strong",{parentName:"p"},"portations"),"\nare in charge of importing data from local files (JSON files, binary files,\u2026) to pipeline source nodes or, in the opposite\ndirection, export data hold by any node of the pipeline to a new file in the repository."),(0,r.kt)("h2",{id:"project-structure"},"Project structure"),(0,r.kt)("p",null,"The Holium CLI is first and foremost intended for use in a local project, set up with ",(0,r.kt)("a",{parentName:"p",href:"https://git-scm.com/"},"git")," and\n",(0,r.kt)("a",{parentName:"p",href:"https://dvc.org/"},"dvc")," versioning. When initializing a project with the ",(0,r.kt)("inlineCode",{parentName:"p"},"holium init")," command, a directory structure\nwill be automatically set up using a common architecture followed by other tools like ",(0,r.kt)("a",{parentName:"p",href:"https://www.pachyderm.com/"},"Pachyderm"),"\nand organized around three areas:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"local")," area holds your local work with Holium. It is not tracked by any version control system and serves as the basic storage layer for local pipeline construction."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"interplanetary")," area, named after the InterPlanetary Linked Data it holds, can be exported from and imported into the local area, is tracked by the version control system, and focus on sharing and collaborating on pipeline construction and execution."),(0,r.kt)("li",{parentName:"ul"},"Finally, the ",(0,r.kt)("em",{parentName:"li"},"repository")," area refers to all other assets of your project, whether scripts, raw data, transformed data or others, that Holium interacts with only through portations.")),(0,r.kt)("p",null,"By default, the two first areas are initialized in a ",(0,r.kt)("inlineCode",{parentName:"p"},".holium")," directory at the root of the project, with the\nfollowing main components."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud83d\udfe2 ",(0,r.kt)("inlineCode",{parentName:"li"},".holium/.gitignore")),(0,r.kt)("li",{parentName:"ul"},"\ud83d\udfe1 ",(0,r.kt)("inlineCode",{parentName:"li"},".holium/interplanetary/")),(0,r.kt)("li",{parentName:"ul"},"\ud83d\udd34 ",(0,r.kt)("inlineCode",{parentName:"li"},".holium/local/")),(0,r.kt)("li",{parentName:"ul"},"\ud83d\udfe2 ",(0,r.kt)("inlineCode",{parentName:"li"},".holium/portations"))),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"\ud83d\udfe2 handled by git."),(0,r.kt)("li",{parentName:"ul"},"\ud83d\udfe1 handled by dvc."),(0,r.kt)("li",{parentName:"ul"},"\ud83d\udd34 ignored by git. "))),(0,r.kt)("h2",{id:"pipeline-construction"},"Pipeline construction"),(0,r.kt)("p",null,"As discussed in the introduction, usage of the CLI is facilitated by the introduction of three types of nodes: sources,\nshapers and transformations. Their models are kept as simple as possible, adn their manipulation follows a strict\n",(0,r.kt)("em",{parentName:"p"},"Create, Read, Update, Delete, List")," (CRUDL) interface."),(0,r.kt)("img",{src:"https://www.plantuml.com/plantuml/png/hOun3i8m303tl28ZPCa_661WOApSr91KYOqSTq2eVuTKOYY20GcFljFPXliHWzhAamIqTsEVunn1GUUizvkgakYozNuXOsNgQeXOeC7TyR2tEIaAvARCnhnw4Que_-kf0DKpIm5DJBzqkqIVqkyMJ_fDws-AWGTi_0IrB0kxFXY1XephH-O7",alt:null}),(0,r.kt)("p",null,"For each type pipeline node, refer to the embedded help commands to get more details on expected arguments:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"holium source --help\n# Lists the available CRUDL commands for *source* objects.\n\nholium source create --help\n# Provides all required details on the expected arguments\n# of the CREATE function for *source* objects.  \n")),(0,r.kt)("p",null,"Pipeline nodes in the local area can be connected through pipeline edges known as ",(0,r.kt)("em",{parentName:"p"},"connections")," that use ",(0,r.kt)("em",{parentName:"p"},"selectors")," to\nselect parts of data from a tail node to be handed over to a head node. Their model is also kept simple and objects are\nmanipulated through CRUDL commands."),(0,r.kt)("img",{src:"https://www.plantuml.com/plantuml/png/oq_AIaqkKKZEpyi3qfdvUGhLN0f0eAMLcQAbfQ2lhw6aP5EIc9aJNvPQL99QOVUeRP9DHcfY2eolfAIfhm_M0bPLd9e3D2U_2AJJAzZVJo4dioIrA347fWYi5P-YMW00",alt:null}),(0,r.kt)("h2",{id:"portations"},"Portations"),(0,r.kt)("p",null,"Portations are smart bridges between files in the repository area and Holium data in the local area.\nThey support multiple serialization formats like JSON for the formers, and can work in two directions, whether to\nimport data from files to sources of the local pipeline, or to export Holium data transformed in the local pipeline into\nactual files in the repository."),(0,r.kt)("p",null,"One project may for instance hold two input files, ",(0,r.kt)("inlineCode",{parentName:"p"},"input.json")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"input.jpeg"),", in the repository. Portations can be\ncreated to use these two files as input of a Holium pipeline, connected them its ",(0,r.kt)("em",{parentName:"p"},"source")," nodes, while results of the execution\ncould be stored in a new ",(0,r.kt)("inlineCode",{parentName:"p"},"result.json")," file in the repository through another portation working in the other direction and connected\nto a tail ",(0,r.kt)("em",{parentName:"p"},"shaper")," or ",(0,r.kt)("em",{parentName:"p"},"transformation")," node of the pipeline."),(0,r.kt)("img",{src:"https://www.plantuml.com/plantuml/png/oq_AIaqkKIZ8Bof9BCdCprEevb800Ysjp1GjBGLzVGqb9PkKp2AW6g2adPLDMMfHIMg5dPAIfhu-M6LQPavgV45YIGP8CPZEoIn9BKhCGL6Gbb-KcrW2KXATb9bNarMSdrVpg65PB4XHBG00",alt:null}),(0,r.kt)("p",null,"The model behind portations is self-explicit and objects are also manipulated with CRUDL commands."),(0,r.kt)("h2",{id:"pipeline-running"},"Pipeline running"),(0,r.kt)("p",null,"Once a pipeline is ready for execution, with all of its node connected and forming a proper node, transformations can\nactually be executed with a simple command: ",(0,r.kt)("inlineCode",{parentName:"p"},"holium project run"),". Nodes of the pipeline will automatically be sorted\nto be run in the right order, data will automatically be fetched from files targeted by import portations or data locally\nstored in the pipeline, and results will be written to files targeted by export portations."),(0,r.kt)("h2",{id:"versioning-and-collaboration"},"Versioning and collaboration"),(0,r.kt)("p",null,"Finally, at each step of the construction of a pipeline, before or after any execution, a local Holium project can be\nexported to the interplanetary area with a simple command: ",(0,r.kt)("inlineCode",{parentName:"p"},"holium project export"),". Objects will automatically\nbe added to your interplanetary area that strictly represents the current state of your pipeline through linked-data\nfiles, including node data if any."),(0,r.kt)("p",null,"The interplanetary area can efficiently be stored and shared on a remote repository or on ",(0,r.kt)("a",{parentName:"p",href:"https://ipfs.io/"},"IPFS"),"\nso that collaborators can fetch it and import it to their own local area with the ",(0,r.kt)("inlineCode",{parentName:"p"},"holium project import")," command."))}u.isMDXComponent=!0}}]);